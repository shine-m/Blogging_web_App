{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Asus/Desktop/vs_code/uploading image/image_upload/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/Asus/Desktop/vs_code/uploading image/image_upload/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/Asus/Desktop/vs_code/uploading image/image_upload/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Asus/Desktop/vs_code/uploading image/image_upload/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _createForOfIteratorHelper from\"C:/Users/Asus/Desktop/vs_code/uploading image/image_upload/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import React,{useEffect,useState}from\"react\";import{getDocs,collection,doc,deleteDoc}from\"firebase/firestore\";import{db}from\"./firebase-config\";import{auth,storage}from\"./firebase-config\";import{ref,deleteObject}from\"firebase/storage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function isspace(x){var _iterator=_createForOfIteratorHelper(x),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var i=_step.value;if(i!==\" \")return true;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return false;}function Home(_ref){var isAuth=_ref.isAuth;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),postLists=_useState2[0],setPostLists=_useState2[1];var postsCollectionRef=collection(db,\"posts\");useEffect(function(){var getPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getDocs(postsCollectionRef);case 2:data=_context.sent;setPostLists(data.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});}));case 4:case\"end\":return _context.stop();}},_callee);}));return function getPosts(){return _ref2.apply(this,arguments);};}();getPosts();},[]);var deletePost=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){var postDoc,i,desertRef;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:postDoc=doc(db,\"posts\",id.id);if(id.urls!==null){for(i=0;i<id.urls.length;i++){desertRef=ref(storage,id.urls[i]);deleteObject(desertRef);}}_context2.next=4;return deleteDoc(postDoc);case 4:window.location.reload();case 5:case\"end\":return _context2.stop();}},_callee2);}));return function deletePost(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"homePage\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u2302 Blogs \"}),postLists.map(function(post){return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"postHeader\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:/*#__PURE__*/_jsx(\"h1\",{children:post.title})}),/*#__PURE__*/_jsx(\"div\",{className:\"deletePost\",children:isAuth&&post.author.id===auth.currentUser.uid&&/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){deletePost(post);},children:[\" \",\"\\uD83D\\uDDD1\"]})})]}),post.type===\"image\"&&post.urls.map(function(a){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"a\",{href:a,children:/*#__PURE__*/_jsx(\"img\",{src:a})})});}),post.type===\"video\"&&post.urls.map(function(a){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"video\",{controls:\"controls\",poster:\"https://firebasestorage.googleapis.com/v0/b/blog-project-3100.appspot.com/o/images%2Fpost597d32a6-f3f7-491c-a797-f01ede732c74%2F178.jpgd533ee3b-d8ea-4cbb-a735-f74cd1d7c32d?alt=media&token=cf8d1cf5-8bc3-45df-b55c-983c9a2e70be&_gl=1*s0dikb*_ga*NzgyMjI1MDk3LjE2OTEwMDQyODM.*_ga_CW55HF8NVT*MTY5Njg2OTY3NS40Ni4xLjE2OTY4NzAxMzcuNTYuMC4w\",mute:\"true\",children:/*#__PURE__*/_jsx(\"source\",{src:a,type:\"video/mp4\"})})});}),isspace(post.postText)&&/*#__PURE__*/_jsxs(\"div\",{className:\"postTextContainer\",children:[\"\\uD83D\\uDC49\",post.postText]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"@\",post.author.name]})]},post.id);})]});}export default Home;export{isspace};","map":{"version":3,"names":["React","useEffect","useState","getDocs","collection","doc","deleteDoc","db","auth","storage","ref","deleteObject","jsx","_jsx","jsxs","_jsxs","isspace","x","_iterator","_createForOfIteratorHelper","_step","s","n","done","i","value","err","e","f","Home","_ref","isAuth","_useState","_useState2","_slicedToArray","postLists","setPostLists","postsCollectionRef","getPosts","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","sent","docs","map","_objectSpread","id","stop","apply","arguments","deletePost","_ref3","_callee2","postDoc","desertRef","_callee2$","_context2","urls","length","window","location","reload","_x","className","children","post","title","author","currentUser","uid","onClick","type","a","href","src","controls","poster","mute","postText","name"],"sources":["C:/Users/Asus/Desktop/vs_code/uploading image/image_upload/src/pages/Home.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { getDocs, collection, doc, deleteDoc } from \"firebase/firestore\";\r\nimport { db } from \"./firebase-config\";\r\nimport { auth, storage } from \"./firebase-config\";\r\nimport { ref, deleteObject } from \"firebase/storage\";\r\n\r\nfunction isspace(x) {\r\n  for (let i of x) {\r\n    if (i !== \" \") return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction Home({ isAuth }) {\r\n  const [postLists, setPostLists] = useState([]);\r\n  const postsCollectionRef = collection(db, \"posts\");\r\n  useEffect(() => {\r\n    const getPosts = async () => {\r\n      const data = await getDocs(postsCollectionRef);\r\n      setPostLists(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n    };\r\n    getPosts();\r\n  }, []);\r\n\r\n  const deletePost = async (id) => {\r\n    const postDoc = doc(db, \"posts\", id.id);\r\n    if (id.urls !== null) {\r\n      for (let i = 0; i < id.urls.length; i++) {\r\n        const desertRef = ref(storage, id.urls[i]);\r\n        deleteObject(desertRef);\r\n      }\r\n    }\r\n    await deleteDoc(postDoc);\r\n    window.location.reload();\r\n  };\r\n  return (\r\n    <div className=\"homePage\">\r\n      <h1>âŒ‚ Blogs </h1>\r\n      {postLists.map((post) => {\r\n        return (\r\n          <div className=\"post\" key={post.id}>\r\n            <div className=\"postHeader\">\r\n              <div className=\"title\">\r\n                <h1>{post.title}</h1>\r\n              </div>\r\n              <div className=\"deletePost\">\r\n                {isAuth && post.author.id === auth.currentUser.uid && (\r\n                  <button\r\n                    onClick={() => {\r\n                      deletePost(post);\r\n                    }}\r\n                  >\r\n                    {\" \"}\r\n                    &#128465;\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {post.type === \"image\" &&\r\n              post.urls.map((a) => {\r\n                return (\r\n                  <div>\r\n                    <a href={a}>\r\n                      <img src={a} />\r\n                    </a>\r\n                  </div>\r\n                );\r\n              })}\r\n            {post.type === \"video\" &&\r\n              post.urls.map((a) => {\r\n                return (\r\n                  <div>\r\n                    <video\r\n                      controls=\"controls\"\r\n                      poster=\"https://firebasestorage.googleapis.com/v0/b/blog-project-3100.appspot.com/o/images%2Fpost597d32a6-f3f7-491c-a797-f01ede732c74%2F178.jpgd533ee3b-d8ea-4cbb-a735-f74cd1d7c32d?alt=media&token=cf8d1cf5-8bc3-45df-b55c-983c9a2e70be&_gl=1*s0dikb*_ga*NzgyMjI1MDk3LjE2OTEwMDQyODM.*_ga_CW55HF8NVT*MTY5Njg2OTY3NS40Ni4xLjE2OTY4NzAxMzcuNTYuMC4w\"\r\n                      mute=\"true\"\r\n                    >\r\n                      <source src={a} type=\"video/mp4\" />\r\n                    </video>\r\n                  </div>\r\n                );\r\n              })}\r\n\r\n            {isspace(post.postText) && (\r\n              <div className=\"postTextContainer\">ðŸ‘‰{post.postText}</div>\r\n            )}\r\n\r\n            <h3>@{post.author.name}</h3>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\nexport { isspace };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}